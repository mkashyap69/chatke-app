{"ast":null,"code":"import _slicedToArray from\"/Users/manish./Desktop/WebDev/whatsapp-socketio/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable react-hooks/exhaustive-deps */import{Divider}from'@chakra-ui/layout';import React,{useEffect,useState}from'react';import Friends from'./Friends';import{useSelector,useDispatch}from'react-redux';import{ClickedUser}from'../redux/actions/userActions';import{getMsgHistory}from'../redux/actions/msgsActions';import{getRecentFriendsList,addToRecentFriendsList}from'../redux/actions/friendsListAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function FriendsBar(_ref){var onClose=_ref.onClose;var searchedUser=useSelector(function(state){var _state$searchedUser;return(_state$searchedUser=state.searchedUser)===null||_state$searchedUser===void 0?void 0:_state$searchedUser.user;});var clickedUser=useSelector(function(state){return state.clickedUser.user;});var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var loggedInUser=useSelector(function(state){return state.user.data.data.user;});var recentFriendsList=useSelector(function(state){var _state$recentFriendsL,_state$recentFriendsL2,_state$recentFriendsL3;return(_state$recentFriendsL=state.recentFriendsList)===null||_state$recentFriendsL===void 0?void 0:(_state$recentFriendsL2=_state$recentFriendsL.data)===null||_state$recentFriendsL2===void 0?void 0:(_state$recentFriendsL3=_state$recentFriendsL2.data)===null||_state$recentFriendsL3===void 0?void 0:_state$recentFriendsL3.recentlyClickedUsers;});var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),roomName=_useState4[0],setRoomName=_useState4[1];useEffect(function(){dispatch(getRecentFriendsList());if(clickedUser){dispatch(addToRecentFriendsList(clickedUser));}},[clickedUser]);useEffect(function(){if(!searchedUser){setUser(null);}else{setUser(searchedUser.data);}},[searchedUser]);useEffect(function(){if(clickedUser&&roomName){dispatch(getMsgHistory(roomName));}},[clickedUser,roomName]);var onClickHandlerSearch=function onClickHandlerSearch(){dispatch(ClickedUser(searchedUser.data));onClose();var loggedInUserUserId=loggedInUser.userId;var roomName=parseInt(loggedInUserUserId,36)*parseInt(searchedUser.data.userId,36);setRoomName(roomName);setUser(null);};var onClickHandlerRecent=function onClickHandlerRecent(recentFriend){dispatch(ClickedUser(recentFriend));onClose();var loggedInUserUserId=loggedInUser.userId;var roomName=parseInt(loggedInUserUserId,36)*parseInt(recentFriend.userId,36);setRoomName(roomName);setUser(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"friends-bar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"friends-bar-single1\",onClick:onClickHandlerSearch,children:[/*#__PURE__*/_jsx(Friends,{name:user===null||user===void 0?void 0:user.name}),/*#__PURE__*/_jsx(Divider,{})]}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontWeight:'bolder',color:'#79c7c5'},children:\"Recent Chats\"}),recentFriendsList?recentFriendsList.map(function(recentFriend){return/*#__PURE__*/_jsxs(\"div\",{className:\"friends-bar-single1\",onClick:function onClick(){return onClickHandlerRecent(recentFriend);},children:[/*#__PURE__*/_jsx(Friends,{name:recentFriend.name}),/*#__PURE__*/_jsx(Divider,{})]},recentFriend._id);}):'No recent chats. Start texting!!!']})]});}export default FriendsBar;","map":{"version":3,"sources":["/Users/manish./Desktop/WebDev/whatsapp-socketio/client/src/components/FriendsBar.js"],"names":["Divider","React","useEffect","useState","Friends","useSelector","useDispatch","ClickedUser","getMsgHistory","getRecentFriendsList","addToRecentFriendsList","FriendsBar","onClose","searchedUser","state","user","clickedUser","setUser","dispatch","loggedInUser","data","recentFriendsList","recentlyClickedUsers","roomName","setRoomName","onClickHandlerSearch","loggedInUserUserId","userId","parseInt","onClickHandlerRecent","recentFriend","name","fontWeight","color","map","_id"],"mappings":"6KAAA,gDACA,OAASA,OAAT,KAAwB,mBAAxB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,WAAT,KAA4B,8BAA5B,CACA,OAASC,aAAT,KAA8B,8BAA9B,CACA,OACEC,oBADF,CAEEC,sBAFF,KAGO,oCAHP,C,6IAKA,QAASC,CAAAA,UAAT,MAAiC,IAAXC,CAAAA,OAAW,MAAXA,OAAW,CAC/B,GAAMC,CAAAA,YAAY,CAAGR,WAAW,CAAC,SAACS,KAAD,qDAAWA,KAAK,CAACD,YAAjB,8CAAW,oBAAoBE,IAA/B,EAAD,CAAhC,CACA,GAAMC,CAAAA,WAAW,CAAGX,WAAW,CAAC,SAACS,KAAD,QAAWA,CAAAA,KAAK,CAACE,WAAN,CAAkBD,IAA7B,EAAD,CAA/B,CAF+B,cAGPZ,QAAQ,CAAC,EAAD,CAHD,wCAGxBY,IAHwB,eAGlBE,OAHkB,eAI/B,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CACA,GAAMa,CAAAA,YAAY,CAAGd,WAAW,CAAC,SAACS,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAN,CAAWK,IAAX,CAAgBA,IAAhB,CAAqBL,IAAhC,EAAD,CAAhC,CACA,GAAMM,CAAAA,iBAAiB,CAAGhB,WAAW,CACnC,SAACS,KAAD,uGAAWA,KAAK,CAACO,iBAAjB,wEAAW,sBAAyBD,IAApC,yEAAW,uBAA+BA,IAA1C,iDAAW,uBAAqCE,oBAAhD,EADmC,CAArC,CAN+B,eASCnB,QAAQ,CAAC,IAAD,CATT,yCASxBoB,QATwB,eASdC,WATc,eAW/BtB,SAAS,CAAC,UAAM,CACdgB,QAAQ,CAACT,oBAAoB,EAArB,CAAR,CAEA,GAAIO,WAAJ,CAAiB,CACfE,QAAQ,CAACR,sBAAsB,CAACM,WAAD,CAAvB,CAAR,CACD,CACF,CANQ,CAMN,CAACA,WAAD,CANM,CAAT,CAQAd,SAAS,CAAC,UAAM,CACd,GAAI,CAACW,YAAL,CAAmB,CACjBI,OAAO,CAAC,IAAD,CAAP,CACD,CAFD,IAEO,CACLA,OAAO,CAACJ,YAAY,CAACO,IAAd,CAAP,CACD,CACF,CANQ,CAMN,CAACP,YAAD,CANM,CAAT,CAQAX,SAAS,CAAC,UAAM,CACd,GAAIc,WAAW,EAAIO,QAAnB,CAA6B,CAC3BL,QAAQ,CAACV,aAAa,CAACe,QAAD,CAAd,CAAR,CACD,CACF,CAJQ,CAIN,CAACP,WAAD,CAAcO,QAAd,CAJM,CAAT,CAMA,GAAME,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CACjCP,QAAQ,CAACX,WAAW,CAACM,YAAY,CAACO,IAAd,CAAZ,CAAR,CACAR,OAAO,GACP,GAAMc,CAAAA,kBAAkB,CAAGP,YAAY,CAACQ,MAAxC,CAEA,GAAIJ,CAAAA,QAAQ,CACVK,QAAQ,CAACF,kBAAD,CAAqB,EAArB,CAAR,CAAmCE,QAAQ,CAACf,YAAY,CAACO,IAAb,CAAkBO,MAAnB,CAA2B,EAA3B,CAD7C,CAEAH,WAAW,CAACD,QAAD,CAAX,CACAN,OAAO,CAAC,IAAD,CAAP,CACD,CATD,CAWA,GAAMY,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACC,YAAD,CAAkB,CAC7CZ,QAAQ,CAACX,WAAW,CAACuB,YAAD,CAAZ,CAAR,CACAlB,OAAO,GACP,GAAMc,CAAAA,kBAAkB,CAAGP,YAAY,CAACQ,MAAxC,CAEA,GAAIJ,CAAAA,QAAQ,CACVK,QAAQ,CAACF,kBAAD,CAAqB,EAArB,CAAR,CAAmCE,QAAQ,CAACE,YAAY,CAACH,MAAd,CAAsB,EAAtB,CAD7C,CAEAH,WAAW,CAACD,QAAD,CAAX,CACAN,OAAO,CAAC,IAAD,CAAP,CACD,CATD,CAUA,mBACE,aAAK,SAAS,CAAC,aAAf,wBACE,aAAK,SAAS,CAAC,qBAAf,CAAqC,OAAO,CAAEQ,oBAA9C,wBACE,KAAC,OAAD,EAAS,IAAI,CAAEV,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEgB,IAArB,EADF,cAEE,KAAC,OAAD,IAFF,GADF,cAME,wCACE,WAAI,KAAK,CAAE,CAAEC,UAAU,CAAE,QAAd,CAAwBC,KAAK,CAAE,SAA/B,CAAX,0BADF,CAEGZ,iBAAiB,CACdA,iBAAiB,CAACa,GAAlB,CAAsB,SAACJ,YAAD,qBACpB,aACE,SAAS,CAAC,qBADZ,CAGE,OAAO,CAAE,yBAAMD,CAAAA,oBAAoB,CAACC,YAAD,CAA1B,EAHX,wBAKE,KAAC,OAAD,EAAS,IAAI,CAAEA,YAAY,CAACC,IAA5B,EALF,cAME,KAAC,OAAD,IANF,GAEOD,YAAY,CAACK,GAFpB,CADoB,EAAtB,CADc,CAWd,mCAbN,GANF,GADF,CAwBD,CAED,cAAexB,CAAAA,UAAf","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport { Divider } from '@chakra-ui/layout';\nimport React, { useEffect, useState } from 'react';\nimport Friends from './Friends';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ClickedUser } from '../redux/actions/userActions';\nimport { getMsgHistory } from '../redux/actions/msgsActions';\nimport {\n  getRecentFriendsList,\n  addToRecentFriendsList,\n} from '../redux/actions/friendsListAction';\n\nfunction FriendsBar({ onClose }) {\n  const searchedUser = useSelector((state) => state.searchedUser?.user);\n  const clickedUser = useSelector((state) => state.clickedUser.user);\n  const [user, setUser] = useState({});\n  const dispatch = useDispatch();\n  const loggedInUser = useSelector((state) => state.user.data.data.user);\n  const recentFriendsList = useSelector(\n    (state) => state.recentFriendsList?.data?.data?.recentlyClickedUsers\n  );\n  const [roomName, setRoomName] = useState(null);\n\n  useEffect(() => {\n    dispatch(getRecentFriendsList());\n\n    if (clickedUser) {\n      dispatch(addToRecentFriendsList(clickedUser));\n    }\n  }, [clickedUser]);\n\n  useEffect(() => {\n    if (!searchedUser) {\n      setUser(null);\n    } else {\n      setUser(searchedUser.data);\n    }\n  }, [searchedUser]);\n\n  useEffect(() => {\n    if (clickedUser && roomName) {\n      dispatch(getMsgHistory(roomName));\n    }\n  }, [clickedUser, roomName]);\n\n  const onClickHandlerSearch = () => {\n    dispatch(ClickedUser(searchedUser.data));\n    onClose();\n    const loggedInUserUserId = loggedInUser.userId;\n\n    let roomName =\n      parseInt(loggedInUserUserId, 36) * parseInt(searchedUser.data.userId, 36);\n    setRoomName(roomName);\n    setUser(null);\n  };\n\n  const onClickHandlerRecent = (recentFriend) => {\n    dispatch(ClickedUser(recentFriend));\n    onClose();\n    const loggedInUserUserId = loggedInUser.userId;\n\n    let roomName =\n      parseInt(loggedInUserUserId, 36) * parseInt(recentFriend.userId, 36);\n    setRoomName(roomName);\n    setUser(null);\n  };\n  return (\n    <div className=\"friends-bar\">\n      <div className=\"friends-bar-single1\" onClick={onClickHandlerSearch}>\n        <Friends name={user?.name} />\n        <Divider />\n      </div>\n\n      <>\n        <h2 style={{ fontWeight: 'bolder', color: '#79c7c5' }}>Recent Chats</h2>\n        {recentFriendsList\n          ? recentFriendsList.map((recentFriend) => (\n              <div\n                className=\"friends-bar-single1\"\n                key={recentFriend._id}\n                onClick={() => onClickHandlerRecent(recentFriend)}\n              >\n                <Friends name={recentFriend.name} />\n                <Divider />\n              </div>\n            ))\n          : 'No recent chats. Start texting!!!'}\n      </>\n    </div>\n  );\n}\n\nexport default FriendsBar;\n"]},"metadata":{},"sourceType":"module"}