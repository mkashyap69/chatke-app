{"version":3,"sources":["../../src/use-menu.ts"],"names":["useClickable","useDescendant","useDescendants","useControllableState","useDisclosure","useFocusOnHide","useId","useIds","useOutsideClick","useShortcut","useUpdateEffect","usePopper","createContext","getValidChildren","mergeRefs","addItem","callAllHandlers","dataAttr","focus","getNextIndex","getNextItemFromSearch","getOwnerDocument","getPrevIndex","isActiveElement","isArray","isString","normalizeEventKey","removeItem","React","MenuProvider","useMenuContext","strict","name","useMenu","props","id","closeOnSelect","closeOnBlur","autoSelect","isLazy","placement","isOpen","onOpen","onClose","onToggle","menuRef","useRef","buttonRef","ref","handler","event","current","contains","target","popper","focusedIndex","setFocusedIndex","useState","domContext","focusRef","visible","shouldFocus","buttonId","menuId","openAndFocusMenu","useCallback","nextTick","openAndFocusFirstItem","openAndFocusLastItem","descendants","length","refocus","doc","hasFocusWithin","activeElement","shouldRefocus","el","element","onTransitionEnd","forceUpdate","orientation","useMenuButton","externalRef","menu","onClick","action","onKeyDown","eventKey","keyMap","Enter","ArrowDown","ArrowUp","preventDefault","stopPropagation","referenceRef","useMenuList","Error","onCharacterPress","key","Tab","Escape","nextIndex","prevIndex","fn","characterHandler","character","nextItem","node","textContent","index","indexOf","hasBeenOpened","shouldRenderChildren","children","tabIndex","role","style","transformOrigin","useMenuPositioner","getPopperProps","visibility","useMenuItem","onMouseEnter","onMouseEnterProp","onMouseMove","onMouseMoveProp","onMouseLeave","onMouseLeaveProp","onClickProp","isDisabled","isFocusable","htmlProps","menuCloseOnSelect","context","disabled","focusable","isFocused","trulyDisabled","clickableProps","useMenuOption","type","isChecked","menuItemProps","ownProps","useMenuOptionGroup","value","valueProp","defaultValue","onChange","onChangeProp","isRadio","fallback","setValue","selectedValue","nextValue","includes","validChildren","clones","map","child","cloneElement","useMenuState"],"mappings":"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","sourcesContent":["import { useClickable } from \"@chakra-ui/clickable\"\nimport { useDescendant, useDescendants } from \"@chakra-ui/descendant\"\nimport {\n  useControllableState,\n  useDisclosure,\n  UseDisclosureProps,\n  useFocusOnHide,\n  useId,\n  useIds,\n  useOutsideClick,\n  useShortcut,\n  useUpdateEffect,\n} from \"@chakra-ui/hooks\"\nimport { usePopper, UsePopperProps } from \"@chakra-ui/popper\"\nimport {\n  createContext,\n  EventKeyMap,\n  getValidChildren,\n  mergeRefs,\n} from \"@chakra-ui/react-utils\"\nimport {\n  addItem,\n  callAllHandlers,\n  dataAttr,\n  focus,\n  getNextIndex,\n  getNextItemFromSearch,\n  getOwnerDocument,\n  getPrevIndex,\n  isActiveElement,\n  isArray,\n  isString,\n  normalizeEventKey,\n  removeItem,\n} from \"@chakra-ui/utils\"\nimport * as React from \"react\"\n\nconst [MenuProvider, useMenuContext] = createContext<UseMenuReturn>({\n  strict: false,\n  name: \"MenuContext\",\n})\n\nexport { MenuProvider, useMenuContext }\n\nexport interface UseMenuProps extends UsePopperProps, UseDisclosureProps {\n  /**\n   * If `true`, the menu will close when a menu item is\n   * clicked\n   *\n   * @default true\n   */\n  closeOnSelect?: boolean\n  /**\n   * If `true`, the menu will close when you click outside\n   * the menu list\n   *\n   * @default true\n   */\n  closeOnBlur?: boolean\n  /**\n   * If `true`, the first enabled menu item will receive focus and be selected\n   * when the menu opens.\n   *\n   * @default true\n   */\n  autoSelect?: boolean\n  /**\n   * Performance 🚀:\n   * If `true`, the MenuItem rendering will be deferred\n   * until the menu is open.\n   */\n  isLazy?: boolean\n}\n\n/**\n * React Hook to manage a menu\n *\n * It provides the logic and will be used with react context\n * to propagate its return value to all children\n */\nexport function useMenu(props: UseMenuProps = {}) {\n  const {\n    id,\n    closeOnSelect = true,\n    closeOnBlur = true,\n    autoSelect = true,\n    isLazy,\n    placement = \"bottom-start\",\n  } = props\n\n  const { isOpen, onOpen, onClose, onToggle } = useDisclosure(props)\n\n  /**\n   * Prepare the reference to the menu and disclosure\n   */\n  const menuRef = React.useRef<HTMLDivElement>(null)\n  const buttonRef = React.useRef<HTMLButtonElement>(null)\n\n  useOutsideClick({\n    ref: menuRef,\n    handler: (event) => {\n      if (\n        isOpen &&\n        closeOnBlur &&\n        !buttonRef.current?.contains(event.target as HTMLElement)\n      ) {\n        onClose()\n      }\n    },\n  })\n\n  /**\n   * Add some popper.js for dynamic positioning\n   */\n  const popper = usePopper({\n    placement,\n    ...props,\n  })\n\n  const [focusedIndex, setFocusedIndex] = React.useState(-1)\n\n  /**\n   * Context to register all menu item nodes\n   */\n  const domContext = useDescendants<HTMLDivElement, {}>()\n\n  /**\n   * Focus the button when we close the menu\n   */\n  useUpdateEffect(() => {\n    if (!isOpen) {\n      setFocusedIndex(-1)\n    }\n  }, [isOpen])\n\n  useFocusOnHide(menuRef, {\n    focusRef: buttonRef,\n    visible: isOpen,\n    shouldFocus: true,\n  })\n\n  /**\n   * Generate unique ids for menu's list and button\n   */\n  const [buttonId, menuId] = useIds(id, `menu-button`, `menu-list`)\n\n  const openAndFocusMenu = React.useCallback(() => {\n    onOpen()\n    focus(menuRef.current, { nextTick: true })\n  }, [onOpen, menuRef])\n\n  const openAndFocusFirstItem = React.useCallback(() => {\n    onOpen()\n    setFocusedIndex(0)\n  }, [onOpen, setFocusedIndex])\n\n  const openAndFocusLastItem = React.useCallback(() => {\n    onOpen()\n    setFocusedIndex(domContext.descendants.length - 1)\n  }, [onOpen, setFocusedIndex, domContext.descendants])\n\n  const refocus = React.useCallback(() => {\n    const doc = getOwnerDocument(menuRef.current)\n    const hasFocusWithin = menuRef.current?.contains(doc.activeElement)\n    const shouldRefocus = isOpen && !hasFocusWithin\n\n    if (!shouldRefocus) return\n\n    const el = domContext.descendants[focusedIndex]?.element\n    focus(el)\n  }, [isOpen, focusedIndex, domContext.descendants])\n\n  return {\n    openAndFocusMenu,\n    openAndFocusFirstItem,\n    openAndFocusLastItem,\n    onTransitionEnd: refocus,\n    domContext,\n    popper,\n    buttonId,\n    menuId,\n    forceUpdate: popper.forceUpdate,\n    orientation: \"vertical\",\n    isOpen,\n    onToggle,\n    onOpen,\n    onClose,\n    menuRef,\n    buttonRef,\n    focusedIndex,\n    closeOnSelect,\n    closeOnBlur,\n    autoSelect,\n    setFocusedIndex,\n    isLazy,\n  }\n}\n\nexport interface UseMenuReturn extends ReturnType<typeof useMenu> {}\n\n/**\n * React Hook to manage a menu button.\n *\n * The assumption here is that the `useMenu` hook is used\n * in a component higher up the tree, and its return value\n * is passed as `context` to this hook.\n */\n\nexport interface UseMenuButtonProps\n  extends Omit<React.HTMLAttributes<Element>, \"color\"> {}\n\nexport function useMenuButton(\n  props: UseMenuButtonProps = {},\n  externalRef: React.Ref<any> = null,\n) {\n  const menu = useMenuContext()\n\n  const {\n    isOpen,\n    onClose,\n    autoSelect,\n    popper,\n    openAndFocusFirstItem,\n    openAndFocusLastItem,\n    openAndFocusMenu,\n  } = menu\n\n  const onClick = React.useCallback(() => {\n    if (isOpen) {\n      onClose()\n    } else {\n      const action = autoSelect ? openAndFocusFirstItem : openAndFocusMenu\n      action()\n    }\n  }, [autoSelect, isOpen, onClose, openAndFocusFirstItem, openAndFocusMenu])\n\n  const onKeyDown = React.useCallback(\n    (event: React.KeyboardEvent) => {\n      const eventKey = normalizeEventKey(event)\n      const keyMap: EventKeyMap = {\n        Enter: openAndFocusFirstItem,\n        ArrowDown: openAndFocusFirstItem,\n        ArrowUp: openAndFocusLastItem,\n      }\n\n      const action = keyMap[eventKey]\n\n      if (action) {\n        event.preventDefault()\n        event.stopPropagation()\n        action(event)\n      }\n    },\n    [openAndFocusFirstItem, openAndFocusLastItem],\n  )\n\n  return {\n    ...props,\n    ref: mergeRefs(menu.buttonRef, externalRef, popper.referenceRef),\n    id: menu.buttonId,\n    \"data-active\": dataAttr(menu.isOpen),\n    \"aria-expanded\": menu.isOpen,\n    \"aria-haspopup\": \"menu\" as React.AriaAttributes[\"aria-haspopup\"],\n    \"aria-controls\": menu.menuId,\n    onClick: callAllHandlers(props.onClick, onClick),\n    onKeyDown: callAllHandlers(props.onKeyDown, onKeyDown),\n  }\n}\n\n/**\n * React Hook to manage a menu list.\n *\n * The assumption here is that the `useMenu` hook is used\n * in a component higher up the tree, and its return value\n * is passed as `context` to this hook.\n */\n\nexport interface UseMenuListProps\n  extends Omit<React.HTMLAttributes<Element>, \"color\"> {}\n\nexport function useMenuList(\n  props: UseMenuListProps = {},\n  ref: React.Ref<any> = null,\n) {\n  const menu = useMenuContext()\n\n  if (!menu) {\n    throw new Error(\n      `useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>`,\n    )\n  }\n\n  const {\n    focusedIndex,\n    setFocusedIndex,\n    menuRef,\n    isOpen,\n    onClose,\n    menuId,\n    domContext: { descendants },\n    isLazy,\n  } = menu\n\n  /**\n   * Hook that creates a keydown event handler that listens\n   * to printable keyboard character press\n   */\n  const onCharacterPress = useShortcut({\n    preventDefault: (event) => event.key !== \" \",\n  })\n\n  const onKeyDown = React.useCallback(\n    (event: React.KeyboardEvent) => {\n      const eventKey = normalizeEventKey(event)\n\n      const keyMap: EventKeyMap = {\n        Tab: (event) => {\n          event.preventDefault()\n        },\n        Escape: onClose,\n        ArrowDown: () => {\n          const nextIndex = getNextIndex(focusedIndex, descendants.length)\n          setFocusedIndex(nextIndex)\n        },\n        ArrowUp: () => {\n          const prevIndex = getPrevIndex(focusedIndex, descendants.length)\n          setFocusedIndex(prevIndex)\n        },\n      }\n\n      const fn = keyMap[eventKey]\n\n      if (fn) {\n        event.preventDefault()\n        fn(event)\n        return\n      }\n\n      const characterHandler = onCharacterPress((character) => {\n        /**\n         * Typeahead: Based on current character pressed,\n         * find the next item to be selected\n         */\n        const nextItem = getNextItemFromSearch(\n          descendants,\n          character,\n          (node) => node.element?.textContent || \"\",\n          descendants[focusedIndex],\n        )\n\n        if (nextItem) {\n          const index = descendants.indexOf(nextItem)\n          setFocusedIndex(index)\n        }\n      })\n\n      characterHandler(event)\n    },\n    [descendants, focusedIndex, onCharacterPress, onClose, setFocusedIndex],\n  )\n\n  const hasBeenOpened = React.useRef(false)\n  if (isOpen) {\n    hasBeenOpened.current = true\n  }\n\n  const shouldRenderChildren = !isLazy || hasBeenOpened.current\n\n  return {\n    ...props,\n    ref: mergeRefs(menuRef, ref),\n    children: shouldRenderChildren ? props.children : null,\n    tabIndex: -1,\n    role: \"menu\",\n    id: menuId,\n    style: {\n      ...props.style,\n      transformOrigin: \"var(--popper-transform-origin)\",\n    },\n    \"aria-orientation\": \"vertical\" as React.AriaAttributes[\"aria-orientation\"],\n    onKeyDown: callAllHandlers(props.onKeyDown, onKeyDown),\n  }\n}\n\nexport function useMenuPositioner(props: any = {}) {\n  const { popper, isOpen } = useMenuContext()\n  return popper.getPopperProps({\n    ...props,\n    style: {\n      visibility: isOpen ? \"visible\" : \"hidden\",\n      ...props.style,\n    },\n  })\n}\n\nexport interface UseMenuItemProps\n  extends Omit<React.HTMLAttributes<Element>, \"color\"> {\n  isDisabled?: boolean\n  isFocusable?: boolean\n  /**\n   * Overrides the parent menu's `closeOnSelect` prop.\n   */\n  closeOnSelect?: boolean\n}\n\nexport function useMenuItem(\n  props: UseMenuItemProps = {},\n  externalRef: React.Ref<any> = null,\n) {\n  const {\n    onMouseEnter: onMouseEnterProp,\n    onMouseMove: onMouseMoveProp,\n    onMouseLeave: onMouseLeaveProp,\n    onClick: onClickProp,\n    isDisabled,\n    isFocusable,\n    closeOnSelect,\n    ...htmlProps\n  } = props\n\n  const menu = useMenuContext()\n\n  const {\n    domContext,\n    setFocusedIndex,\n    focusedIndex,\n    closeOnSelect: menuCloseOnSelect,\n    onClose,\n    menuRef,\n    isOpen,\n  } = menu\n\n  const ref = React.useRef<HTMLDivElement>(null)\n  const id = `menuitem-${useId()}`\n\n  /**\n   * Register the menuitem's node into the domContext\n   */\n  const index = useDescendant({\n    element: ref.current,\n    context: domContext,\n    disabled: isDisabled,\n    focusable: isFocusable,\n  })\n\n  const onMouseEnter = React.useCallback(\n    (event) => {\n      onMouseEnterProp?.(event)\n      if (isDisabled) return\n      setFocusedIndex(index)\n    },\n    [setFocusedIndex, index, isDisabled, onMouseEnterProp],\n  )\n\n  const onMouseMove = React.useCallback(\n    (event) => {\n      onMouseMoveProp?.(event)\n      if (ref.current && !isActiveElement(ref.current)) {\n        onMouseEnter(event)\n      }\n    },\n    [onMouseEnter, onMouseMoveProp],\n  )\n\n  const onMouseLeave = React.useCallback(\n    (event) => {\n      onMouseLeaveProp?.(event)\n      if (isDisabled) return\n      setFocusedIndex(-1)\n    },\n    [setFocusedIndex, isDisabled, onMouseLeaveProp],\n  )\n\n  const onClick = React.useCallback(\n    (event: React.MouseEvent) => {\n      onClickProp?.(event)\n      /**\n       * Close menu and parent menus, allowing the MenuItem\n       * to override its parent menu's `closeOnSelect` prop.\n       */\n      if (closeOnSelect ?? menuCloseOnSelect) {\n        onClose()\n      }\n    },\n    [onClose, onClickProp, menuCloseOnSelect, closeOnSelect],\n  )\n\n  const isFocused = index === focusedIndex\n\n  const trulyDisabled = isDisabled && !isFocusable\n\n  useUpdateEffect(() => {\n    if (!isOpen) return\n    if (isFocused && !trulyDisabled && ref.current) {\n      focus(ref.current, { nextTick: true })\n    } else if (menuRef.current && !isActiveElement(menuRef.current)) {\n      focus(menuRef.current)\n    }\n  }, [isFocused, trulyDisabled, menuRef, isOpen])\n\n  const clickableProps = useClickable({\n    onClick,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    ref: mergeRefs(ref, externalRef),\n    isDisabled,\n    isFocusable,\n  })\n\n  return {\n    ...htmlProps,\n    ...clickableProps,\n    id,\n    role: \"menuitem\",\n    tabIndex: isFocused ? 0 : -1,\n  }\n}\n\nexport interface UseMenuOptionOptions {\n  value?: string\n  isChecked?: boolean\n  type?: \"radio\" | \"checkbox\"\n  children?: React.ReactNode\n}\n\nexport interface UseMenuOptionProps\n  extends UseMenuItemProps,\n    UseMenuOptionOptions {}\n\nexport function useMenuOption(\n  props: UseMenuOptionProps = {},\n  ref: React.Ref<any> = null,\n) {\n  const { type = \"radio\", isChecked, ...menuItemProps } = props\n  const ownProps = useMenuItem(menuItemProps, ref)\n  return {\n    ...ownProps,\n    role: `menuitem${type}`,\n    \"aria-checked\": isChecked as React.AriaAttributes[\"aria-checked\"],\n  }\n}\n\nexport interface UseMenuOptionGroupProps {\n  value?: string | string[]\n  defaultValue?: string | string[]\n  type?: \"radio\" | \"checkbox\"\n  onChange?: (value: string | string[]) => void\n  children?: React.ReactNode\n}\n\nexport function useMenuOptionGroup(props: UseMenuOptionGroupProps = {}) {\n  const {\n    children,\n    type = \"radio\",\n    value: valueProp,\n    defaultValue,\n    onChange: onChangeProp,\n    ...htmlProps\n  } = props\n\n  const isRadio = type === \"radio\"\n\n  const fallback = isRadio ? \"\" : []\n\n  const [value, setValue] = useControllableState({\n    defaultValue: defaultValue ?? fallback,\n    value: valueProp,\n    onChange: onChangeProp,\n  })\n\n  const onChange = React.useCallback(\n    (selectedValue: string) => {\n      if (type === \"radio\" && isString(value)) {\n        setValue(selectedValue)\n      }\n\n      if (type === \"checkbox\" && isArray(value)) {\n        const nextValue = value.includes(selectedValue)\n          ? removeItem(value, selectedValue)\n          : addItem(value, selectedValue)\n\n        setValue(nextValue)\n      }\n    },\n    [value, setValue, type],\n  )\n\n  const validChildren = getValidChildren(children)\n\n  const clones = validChildren.map((child) => {\n    /**\n     * We've added an internal `id` to each `MenuItemOption`,\n     * let's use that for type-checking.\n     *\n     * We can't rely on displayName or the element's type since\n     * they can be changed by the user.\n     */\n    if ((child.type as any).id !== \"MenuItemOption\") return child\n\n    const onClick = (event: MouseEvent) => {\n      onChange(child.props.value)\n      child.props.onClick?.(event)\n    }\n\n    const isChecked =\n      type === \"radio\"\n        ? child.props.value === value\n        : value.includes(child.props.value)\n\n    return React.cloneElement(child, {\n      type,\n      onClick,\n      isChecked,\n    })\n  })\n\n  return {\n    ...htmlProps,\n    children: clones,\n  }\n}\n\nexport function useMenuState() {\n  const { isOpen, onClose } = useMenuContext()\n  return { isOpen, onClose }\n}\n"],"file":"use-menu.js"}